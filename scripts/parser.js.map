{"version":3,"sources":["scripts/parser.js"],"names":["Parser","Context","window","gsWeblangCore","getParser","console","log","sourceCode","parse","ast","initialState","context","_createContext","interpret","board","sizeX","size","x","sizeY","y","init","_","assign","header","table"],"mappings":";;;;;;IAAMA,M;AACJ,oBAAc;AAAA;;AACZ,SAAKC,OAAL,GAAeC,OAAOC,aAAP,CAAqBF,OAApC;AACA,SAAKG,SAAL,GAAiBF,OAAOC,aAAP,CAAqBC,SAAtC;AACAC,YAAQC,GAAR,CAAYJ,OAAOC,aAAnB;AACD;;;;0BAEKI,U,EAAY;AAChBF,cAAQC,GAAR,CAAY,SAAZ;AACAD,cAAQC,GAAR,CAAYC,UAAZ;AACA,aAAO,KAAKH,SAAL,GAAiBI,KAAjB,CAAuBD,UAAvB,CAAP;AACD;;;8BAESE,G,EAAKC,Y,EAAc;AAC3B,UAAMC,UAAU,KAAKC,cAAL,CAAoBF,YAApB,CAAhB;AACAD,UAAII,SAAJ,CAAcF,OAAd;AACA,aAAOA,OAAP;AACD;;;mCAEcD,Y,EAAc;AAC3B,UAAMC,UAAU,IAAI,KAAKV,OAAT,EAAhB;AACAU,cAAQG,KAAR,GAAgBC,KAAhB,GAAwBL,aAAaM,IAAb,CAAkBC,CAA1C;AACAN,cAAQG,KAAR,GAAgBI,KAAhB,GAAwBR,aAAaM,IAAb,CAAkBG,CAA1C;AACAR,cAAQS,IAAR;;AAEAC,QAAEC,MAAF,CAASX,QAAQG,KAAR,EAAT,EAA0B;AACxBG,WAAGP,aAAaa,MAAb,CAAoBN,CADC;AAExBE,WAAGT,aAAaa,MAAb,CAAoBJ,CAFC;AAGxBK,eAAOd,aAAac;AAHI,OAA1B;;AAMA,aAAOb,OAAP;AACD","file":"parser.js","sourcesContent":["class Parser {\n  constructor() {\n    this.Context = window.gsWeblangCore.Context;\n    this.getParser = window.gsWeblangCore.getParser;\n    console.log(window.gsWeblangCore);\n  }\n\n  parse(sourceCode) {\n    console.log('PARSING');\n    console.log(sourceCode);\n    return this.getParser().parse(sourceCode);\n  }\n\n  interpret(ast, initialState) {\n    const context = this._createContext(initialState);\n    ast.interpret(context);\n    return context;\n  }\n\n  _createContext(initialState) {\n    const context = new this.Context();\n    context.board().sizeX = initialState.size.x;\n    context.board().sizeY = initialState.size.y;\n    context.init();\n\n    _.assign(context.board(), {\n      x: initialState.header.x,\n      y: initialState.header.y,\n      table: initialState.table\n    });\n\n    return context;\n  }\n}\n"]}