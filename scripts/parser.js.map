{"version":3,"sources":["scripts/parser.js"],"names":["Parser","console","log","window","gsWeblangCore","Context","buildAst","grammar","parse","sourceCode","ast","initialState","context","_createContext","interpret","board","sizeX","size","x","sizeY","y","init","_","assign","header","table"],"mappings":";;;;;;IAAMA,M;AACJ,oBAAc;AAAA;;AACZC,YAAQC,GAAR,CAAYC,OAAOC,aAAnB;;AAEA,SAAKC,OAAL,GAAeF,OAAOC,aAAP,CAAqBC,OAApC;AACA,SAAKC,QAAL,GAAgBH,OAAOC,aAAP,CAAqBG,OAArB,CAA6BC,KAA7C;AACD;;;;0BAEKC,U,EAAY;AAChB,aAAO,KAAKH,QAAL,CAAcG,UAAd,CAAP;AACD;;;8BAESC,G,EAAKC,Y,EAAc;AAC3B,UAAMC,UAAU,KAAKC,cAAL,CAAoBF,YAApB,CAAhB;AACAD,UAAII,SAAJ,CAAcF,OAAd;AACA,aAAOA,OAAP;AACD;;;mCAEcD,Y,EAAc;AAC3B,UAAMC,UAAU,IAAI,KAAKP,OAAT,EAAhB;AACAO,cAAQG,KAAR,GAAgBC,KAAhB,GAAwBL,aAAaM,IAAb,CAAkBC,CAA1C;AACAN,cAAQG,KAAR,GAAgBI,KAAhB,GAAwBR,aAAaM,IAAb,CAAkBG,CAA1C;AACAR,cAAQS,IAAR;;AAEAC,QAAEC,MAAF,CAASX,QAAQG,KAAR,EAAT,EAA0B;AACxBG,WAAGP,aAAaa,MAAb,CAAoBN,CADC;AAExBE,WAAGT,aAAaa,MAAb,CAAoBJ,CAFC;AAGxBK,eAAOd,aAAac;AAHI,OAA1B;;AAMA,aAAOb,OAAP;AACD","file":"parser.js","sourcesContent":["class Parser {\n  constructor() {\n    console.log(window.gsWeblangCore);\n\n    this.Context = window.gsWeblangCore.Context;\n    this.buildAst = window.gsWeblangCore.grammar.parse;\n  }\n\n  parse(sourceCode) {\n    return this.buildAst(sourceCode);\n  }\n\n  interpret(ast, initialState) {\n    const context = this._createContext(initialState);\n    ast.interpret(context);\n    return context;\n  }\n\n  _createContext(initialState) {\n    const context = new this.Context();\n    context.board().sizeX = initialState.size.x;\n    context.board().sizeY = initialState.size.y;\n    context.init();\n\n    _.assign(context.board(), {\n      x: initialState.header.x,\n      y: initialState.header.y,\n      table: initialState.table\n    });\n\n    return context;\n  }\n}\n"]}